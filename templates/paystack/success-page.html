{% extends "base.html" %}
{% load humanize %}

{% block title %}Payment Confirmation{% endblock %}

{% block content %}
  <div class="max-w-3xl mx-auto space-y-6">
    <div class="bg-white rounded-xl shadow p-6 space-y-4">
      <h1 class="text-2xl font-semibold text-gray-900">Payment successful</h1>
      <p class="text-sm text-gray-500">Hi {{ payment.user.get_full_name|default:payment.user.email }}, thanks for your purchase.</p>

      <div class="rounded-lg border border-gray-200 p-4">
        <p class="text-sm text-gray-600">Reference: <span class="font-semibold text-gray-900">{{ payment.ref }}</span></p>
        <p class="text-sm text-gray-600">Date: <span class="font-semibold text-gray-900">{{ payment.date_ordered }}</span></p>
      </div>

      <div>
        <h2 class="text-lg font-semibold text-gray-900">Order summary</h2>
        <ul class="mt-3 space-y-2 text-sm text-gray-600">
          {% for ord_item in payment.items.all %}
            <li class="flex flex-wrap justify-between gap-2">
              <span>{{ ord_item.item.title }} × {{ ord_item.quantity }}</span>
              <span>£{{ ord_item.get_total|intcomma }}</span>
            </li>
          {% empty %}
            <li>No items were found for this payment.</li>
          {% endfor %}
        </ul>
      </div>

      <p class="text-sm text-gray-500">We’ve sent a receipt to <a class="text-blue-600 hover:text-blue-700" href="mailto:{{ payment.user.email }}">{{ payment.user.email }}</a>.</p>
    </div>
  </div>
{% endblock %}
