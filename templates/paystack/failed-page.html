{% extends "base.html" %}
{% load humanize %}

{% block title %}Payment Failure{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto modern-card p-6 md:p-8">
  <div class="mb-4">
    <span class="inline-flex rounded-full bg-red-100 text-red-700 px-3 py-1 text-sm">Payment failed</span>
    <h1 class="text-2xl font-semibold mt-3">Sorry, {{ payment.user.get_full_name }}</h1>
    <p class="text-gray-600">We could not process this payment. Please try again.</p>
  </div>
  <div class="space-y-2 text-sm">
    <p><strong>Email:</strong> <a href="mailto:test@example.com" class="text-blue-600">{{ payment.user.email }}</a></p>
    <p><strong>Reference:</strong> {{ payment.ref }}</p>
    <p><strong>Date:</strong> {{ payment.date_ordered }}</p>
  </div>
  <div class="mt-5 border-t border-gray-100 pt-4 space-y-2">
    {% for ord_item in payment.items.all %}
      <div class="flex items-center justify-between rounded-xl bg-gray-50 px-3 py-2">
        <span>{{ ord_item.item.title }} × {{ ord_item.quantity }}</span>
        <span>£{{ ord_item.get_total|intcomma }}</span>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
