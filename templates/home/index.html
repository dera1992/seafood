{% extends "base.html" %}
{% load static %}
{% load django_bootstrap5 %}
{% load i18n %}
{% load thumbnail %}
{% load humanize %}
{% load hitcount_tags %}

{% block title %}{% endblock %}

{% block content %}
    <div class="modern-home">
    <div class="hero-slider-with-category-container mt-35 mb-35">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-md-12">
					<!--=======  slider container  =======-->

					<div class="slider-container">
                        <!--=======  Slider area  =======-->

                        <div class="hero-slider-two">

                            <!--=======  Hero slider item  =======-->

                            <div class="hero-slider-item slider-bg-4 modern-hero">
                                <div class="slider-content modern-hero__content">
                                    <div class="hero-badges">
                                        <span class="hero-badge">Cut food waste</span>
                                        <span class="hero-badge">Local shops</span>
                                        <span class="hero-badge">Fresh deals</span>
                                    </div>
                                    <h1>Save more on<span> fresh food</span></h1>
                                    <h1 class="change-text">Shop near-expiry<span> deals</span></h1>

                                    <p class="hero-subtitle">Discover trusted neighborhood shops, buy surplus items, and keep good food out of the bin.</p>

                                    <div class="hero-highlights">
                                        <span><img src="{% static 'assets/images/icon-slider.png' %}" alt=""> Save up to 10%</span>
                                        <span><img src="{% static 'assets/images/icon-slider.png' %}" alt=""> Pick up fast</span>
                                        <span><img src="{% static 'assets/images/icon-slider.png' %}" alt=""> Verified sellers</span>
                                    </div>

                                    <div class="hero-actions">
                                        <a href="{% url 'home:ads_list' %}" class="slider-two-btn">Start buying</a>
                                        <a href="{% url 'product_search:product_filter' %}" class="slider-two-btn hero-secondary">Browse offers</a>
                                    </div>
                                </div>
                            </div>

                            <!--=======  End of Hero slider item  =======-->

                        </div>

                        <!--=======  End of Slider area  =======-->
					</div>

					<!--=======  End of slider container  =======-->
				</div>
			</div>
		</div>
	</div>

    <section class="category-pill-section">
        <div class="container">
            <div class="section-title modern-section-title">
                <span class="section-pill">Shop by category</span>
                <p class="section-subtitle">Curated aisles to find the freshest near-you offers.</p>
            </div>
            <div class="category-pill-list">
                <a href="{% url 'product_search:product_filter' %}?category=Vegetables">Vegetables</a>
                <a href="{% url 'product_search:product_filter' %}?category=Fruits">Fruits</a>
                <a href="{% url 'product_search:product_filter' %}?category=Grains">Grains</a>
                <a href="{% url 'product_search:product_filter' %}?category=Seafood">Seafood</a>
                <a href="{% url 'product_search:product_filter' %}?category=Spices">Spices</a>
                <a href="{% url 'product_search:product_filter' %}?category=Meats">Meats</a>
                <a href="{% url 'product_search:product_filter' %}?category=Oil">Cooking Oil</a>
                <a href="{% url 'product_search:product_filter' %}?category=Honey">Honey</a>
                <a href="{% url 'product_search:product_filter' %}?category=Eggs">Eggs</a>
                <a href="{% url 'product_search:product_filter' %}?category=Others">Others</a>
            </div>
        </div>
    </section>

    <section class="modern-feature-section mb-35">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-20">
                    <div class="modern-feature-card">
                        <div class="feature-icon"><span class="icon_cart_alt"></span></div>
                        <h4>Shop surplus, save money</h4>
                        <p>Find quality items at reduced prices as they get closer to expiry.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-20">
                    <div class="modern-feature-card">
                        <div class="feature-icon"><span class="icon_pin_alt"></span></div>
                        <h4>Buy from nearby stores</h4>
                        <p>Support small shops and get deliveries or pickups faster.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-20">
                    <div class="modern-feature-card">
                        <div class="feature-icon"><span class="icon_like_alt"></span></div>
                        <h4>Help reduce waste</h4>
                        <p>Every purchase prevents good food from being thrown away.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="slider multisale-slider mb-35">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multisale  slider section title  =======-->

					<div class="section-title modern-section-title">
						<span class="section-pill">Deal of the day</span>
                        <span class="pulse-dot" aria-hidden="true"></span>
                        <p class="section-subtitle">Limited picks updated every morning for maximum savings.</p>
					</div>

					<!--=======  End of multisale slider section title  =======-->
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multi sale slider wrapper  =======-->

					<div class="multisale-slider-wrapper">
						<!--=======  single multisale slider product  =======-->
                        {% for latest in latests %}
						<div class="gf-product multisale-slider-product">
							<div class="image">
								<a href="{{ latest.get_absolute_url }}">
									<span class="{{ latest.get_label_display }}">{{ latest.get_status_display }}</span>
                                    {% if latest.delivery %}
                                        <span class="days">Del:{{ latest.delivery }}</span>
                                    {% endif %}
                                    {% for images in latest.get_second_image %}
                                        {% thumbnail images.product_image "260x194" crop="10px 10px"  as im %}
                                                <img  style="margin:{{ im|margin:"260x194" }}" src="{{ im.url }}" width="{{ im.x }}" height="{{ im.y }}" class="img-fluid "  />
                                        {% endthumbnail %}
                                    {% endfor %}
								</a>
								<div class="product-hover-icons" id = "part{{ latest.id }}">
                                    {% if request.user.is_authenticated %}
                                        {% if request.user in latest.favourite.all %}
                                            {% csrf_token %}
                                            <a href="#" id = "cart" data-id="{{ latest.id }}"  data-tooltip="Add to cart"> <span class="icon_cart_alt"></span></a>
                                            <a href="#" id = "wishlist" data-id="{{ latest.id }}"  data-tooltip="Add to wishlist"> <span class="icon_heart"></span> </a>

                                        {% else %}
                                            <a href="#" id = "cart" data-id="{{ latest.id }}"  data-tooltip="Add to cart"> <span class="icon_cart_alt"></span></a>
                                            <a href="#" id = "wishlist" data-id="{{ latest.id }}"  data-tooltip="Add to wishlist"> <span class="icon_heart_alt"></span> </a>
                                        {% endif %}
                                    {% else %}
                                        <a href="{{ ad.get_add_to_cart_url }}"  data-tooltip="Add to cart"> <span class="icon_cart_alt"></span></a>
                                        <a href="{% url 'home:favourite_ad' id=latest.id %}" data-tooltip="Add to wishlist"> <span class="icon_heart_alt"></span> </a>
                                    {% endif %}

								</div>
							</div>
							<div class="product-content">
								<div class="product-categories">
									<a>{{ latest.category}}</a>
								</div>
								<h3 class="product-title"><a href="{{ latest.get_absolute_url }}">{{ latest.title }}</a></h3>
                                {% if latest.expires_on %}
                                    <div class="product-expiry">
                                        {% if latest.is_expired %}
                                            <span class="expiry-badge expired">Expired</span>
                                        {% elif latest.is_expiring_soon %}
                                            <span class="expiry-badge expiring">Expires in {{ latest.days_to_expire }} days</span>
                                        {% else %}
                                            <span class="expiry-badge fresh">Good for {{ latest.days_to_expire }} days</span>
                                        {% endif %}
                                    </div>
                                {% endif %}
								<div class="price-box">
                                     {% if latest.discount_price %}
                                      <span class="discounted-price">₦{{ latest.discount_price|intcomma}}</span>
                                      <span class="main-price">₦{{ latest.price|intcomma}}</span>
                                     {% else %}
                                      <span class="discounted-price">₦{{ latest.price|intcomma}}</span>
                                    {% endif %}
								</div>
							</div>

						</div>
                        {% endfor %}
					</div>

					<!--=======  End of multi sale slider wrapper  =======-->
				</div>
			</div>
		</div>
	</div>

	<div class="featured-product-image-gallery mb-80 pt-120 section-bg modern-promo-strip">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<!--=======  gallery product container  =======-->
					<div class="gallery-product-container">
						<div class="row no-gutters">
						</div>
					</div>

					<!--=======  End of gallery product container  =======-->

				</div>
			</div>
		</div>
	</div>

    <div class="slider multisale-slider mb-35">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multisale  slider section title  =======-->

					<div class="section-title modern-section-title">
						<span class="section-pill">Tubers, Meats, Cooking Oils and Others</span>
					</div>

					<!--=======  End of multisale slider section title  =======-->
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multi sale slider wrapper  =======-->

					<div class="multisale-slider-wrapper">
						<!--=======  single multisale slider product  =======-->
                        {% for ad in ads %}
						<div class="gf-product multisale-slider-product">
							<div class="image">
								<a href="{{ ad.get_absolute_url }}">
									<span class="{{ ad.get_label_display }}">{{ ad.get_status_display }}</span>
                                    {% if ad.delivery %}
                                        <span class="days">Del:{{ ad.delivery }}</span>
                                    {% endif %}
                                    {% for images in ad.get_second_image %}
                                        {% thumbnail images.product_image "260x194" crop="10px 10px"  as im %}
                                                <img  style="margin:{{ im|margin:"260x194" }}" src="{{ im.url }}" width="{{ im.x }}" height="{{ im.y }}" class="img-fluid "  />
                                        {% endthumbnail %}
                                    {% endfor %}
								</a>
								<div class="product-hover-icons" id = "part{{ ad.id }}">
									{% include 'home/special_section.html' %}
								</div>
							</div>
							<div class="product-content">
								<div class="product-categories">
									<a>{{ ad.category}}</a>
								</div>
								<h3 class="product-title"><a href="{{ ad.get_absolute_url }}">{{ ad.title }}</a></h3>
                                {% if ad.expires_on %}
                                    <div class="product-expiry">
                                        {% if ad.is_expired %}
                                            <span class="expiry-badge expired">Expired</span>
                                        {% elif ad.is_expiring_soon %}
                                            <span class="expiry-badge expiring">Expires in {{ ad.days_to_expire }} days</span>
                                        {% else %}
                                            <span class="expiry-badge fresh">Good for {{ ad.days_to_expire }} days</span>
                                        {% endif %}
                                    </div>
                                {% endif %}
								<div class="price-box">
                                     {% if ad.discount_price %}
                                      <span class="discounted-price">₦{{ ad.discount_price|intcomma}}</span>
                                      <span class="main-price">₦{{ ad.discount_price|intcomma}}</span>
                                     {% else %}
                                      <span class="discounted-price">₦{{ ad.price|intcomma}}</span>
                                    {% endif %}
								</div>
							</div>

						</div>
                        {% endfor %}
					</div>

					<!--=======  End of multi sale slider wrapper  =======-->
				</div>
			</div>
		</div>
	</div>

    <div class="slider multisale-slider mb-35">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multisale  slider section title  =======-->

					<div class="section-title modern-section-title">
						<span class="section-pill">Vegetables</span>
					</div>

					<!--=======  End of multisale slider section title  =======-->
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multi sale slider wrapper  =======-->

					<div class="multisale-slider-wrapper">
						<!--=======  single multisale slider product  =======-->
                        {% for ad in ads_veg %}
						<div class="gf-product multisale-slider-product">
							<div class="image">
								<a href="{{ ad.get_absolute_url }}">
									<span class="{{ ad.get_label_display }}">{{ ad.get_status_display }}</span>
                                    {% if ad.delivery %}
                                        <span class="days">Del:{{ ad.delivery }}</span>
                                    {% endif %}
                                    {% for images in ad.get_second_image %}
                                        {% thumbnail images.product_image "260x194" crop="10px 10px"  as im %}
                                                <img  style="margin:{{ im|margin:"260x194" }}" src="{{ im.url }}" width="{{ im.x }}" height="{{ im.y }}" class="img-fluid "  />
                                        {% endthumbnail %}
                                    {% endfor %}
								</a>
								<div class="product-hover-icons" id = "part{{ ad.id }}">
									{% include 'home/special_section.html' %}
								</div>
							</div>
							<div class="product-content">
								<div class="product-categories">
									<a>{{ ad.category}}</a>
								</div>
								<h3 class="product-title"><a href="{{ ad.get_absolute_url }}">{{ ad.title }}</a></h3>
								<div class="price-box">
                                    {% if ad.discount_price %}
                                      <span class="discounted-price">₦{{ ad.discount_price|intcomma}}</span>
                                      <span class="main-price">₦{{ ad.discount_price|intcomma}}</span>
                                     {% else %}
                                      <span class="discounted-price">₦{{ ad.price|intcomma}}</span>
                                    {% endif %}
								</div>
							</div>

						</div>
                        {% endfor %}
					</div>

					<!--=======  End of multi sale slider wrapper  =======-->
				</div>
			</div>
		</div>
	</div>

    <div class="slider multisale-slider mb-35">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multisale  slider section title  =======-->

					<div class="section-title modern-section-title">
						<span class="section-pill">Fruits</span>
					</div>

					<!--=======  End of multisale slider section title  =======-->
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multi sale slider wrapper  =======-->

					<div class="multisale-slider-wrapper">
						<!--=======  single multisale slider product  =======-->
                        {% for ad in ads_fruits %}
						<div class="gf-product multisale-slider-product">
							<div class="image">
								<a href="{{ ad.get_absolute_url }}">
									<span class="{{ ad.get_label_display }}">{{ ad.get_status_display }}</span>
                                    {% if ad.delivery %}
                                        <span class="days">Del:{{ ad.delivery }}</span>
                                    {% endif %}
                                    {% for images in ad.get_second_image %}
                                        {% thumbnail images.product_image "260x194" crop="10px 10px"  as im %}
                                                <img  style="margin:{{ im|margin:"260x194" }}" src="{{ im.url }}" width="{{ im.x }}" height="{{ im.y }}" class="img-fluid "  />
                                        {% endthumbnail %}
                                    {% endfor %}
								</a>
								<div class="product-hover-icons" id = "part{{ ad.id }}">
									{% include 'home/special_section.html' %}
								</div>
							</div>
							<div class="product-content">
								<div class="product-categories">
									<a>{{ ad.category}}</a>
								</div>
								<h3 class="product-title"><a href="{{ ad.get_absolute_url }}">{{ ad.title }}</a></h3>
								<div class="price-box">
                                    {% if ad.discount_price %}
                                      <span class="discounted-price">₦{{ ad.discount_price|intcomma}}</span>
                                      <span class="main-price">₦{{ ad.discount_price|intcomma}}</span>
                                     {% else %}
                                      <span class="discounted-price">₦{{ ad.price|intcomma}}</span>
                                    {% endif %}
								</div>
							</div>

						</div>
                        {% endfor %}
					</div>

					<!--=======  End of multi sale slider wrapper  =======-->
				</div>
			</div>
		</div>
	</div>


    <div class="slider multisale-slider mb-35">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multisale  slider section title  =======-->

					<div class="section-title modern-section-title">
						<span class="section-pill">Grains</span>
					</div>

					<!--=======  End of multisale slider section title  =======-->
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multi sale slider wrapper  =======-->

					<div class="multisale-slider-wrapper">
						<!--=======  single multisale slider product  =======-->
                        {% for ad in ads_grains %}
						<div class="gf-product multisale-slider-product">
							<div class="image">
								<a href="{{ ad.get_absolute_url }}">
									<span class="{{ ad.get_label_display }}">{{ ad.get_status_display }}</span>
                                    {% if ad.delivery %}
                                        <span class="days">Del:{{ ad.delivery }}</span>
                                    {% endif %}
                                    {% for images in ad.get_second_image %}
                                        {% thumbnail images.product_image "260x194" crop="10px 10px"  as im %}
                                                <img  style="margin:{{ im|margin:"260x194" }}" src="{{ im.url }}" width="{{ im.x }}" height="{{ im.y }}" class="img-fluid "  />
                                        {% endthumbnail %}
                                    {% endfor %}
								</a>
								<div class="product-hover-icons" id = "part{{ ad.id }}">
									{% include 'home/special_section.html' %}
								</div>
							</div>
							<div class="product-content">
								<div class="product-categories">
									<a>{{ ad.category}}</a>
								</div>
								<h3 class="product-title"><a href="{{ ad.get_absolute_url }}">{{ ad.title }}</a></h3>
								<div class="price-box">
                                    {% if ad.discount_price %}
                                      <span class="discounted-price">₦{{ ad.discount_price|intcomma}}</span>
                                      <span class="main-price">₦{{ ad.discount_price|intcomma}}</span>
                                     {% else %}
                                      <span class="discounted-price">₦{{ ad.price|intcomma}}</span>
                                    {% endif %}
								</div>
							</div>

						</div>
                        {% endfor %}
					</div>

					<!--=======  End of multi sale slider wrapper  =======-->
				</div>
			</div>
		</div>
	</div>

    <div class="slider multisale-slider mb-35">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multisale  slider section title  =======-->

					<div class="section-title modern-section-title">
						<span class="section-pill">Seafoods</span>
					</div>

					<!--=======  End of multisale slider section title  =======-->
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multi sale slider wrapper  =======-->

					<div class="multisale-slider-wrapper">
						<!--=======  single multisale slider product  =======-->
                        {% for ad in ads_seafood %}
						<div class="gf-product multisale-slider-product">
							<div class="image">
								<a href="{{ ad.get_absolute_url }}">
									<span class="{{ ad.get_label_display }}">{{ ad.get_status_display }}</span>
                                    {% if ad.delivery %}
                                        <span class="days">Del:{{ ad.delivery }}</span>
                                    {% endif %}
                                    {% for images in ad.get_second_image %}
                                        {% thumbnail images.product_image "260x194" crop="10px 10px"  as im %}
                                                <img  style="margin:{{ im|margin:"260x194" }}" src="{{ im.url }}" width="{{ im.x }}" height="{{ im.y }}" class="img-fluid "  />
                                        {% endthumbnail %}
                                    {% endfor %}
								</a>
								<div class="product-hover-icons" id = "part{{ ad.id }}">
									{% include 'home/special_section.html' %}
								</div>
							</div>
							<div class="product-content">
								<div class="product-categories">
									<a>{{ ad.category}}</a>
								</div>
								<h3 class="product-title"><a href="{{ ad.get_absolute_url }}">{{ ad.title }}</a></h3>
								<div class="price-box">
                                    {% if ad.discount_price %}
                                      <span class="discounted-price">₦{{ ad.discount_price|intcomma}}</span>
                                      <span class="main-price">₦{{ ad.discount_price|intcomma}}</span>
                                     {% else %}
                                      <span class="discounted-price">₦{{ ad.price|intcomma}}</span>
                                    {% endif %}
								</div>
							</div>

						</div>
                        {% endfor %}
					</div>

					<!--=======  End of multi sale slider wrapper  =======-->
				</div>
			</div>
		</div>
	</div>

    <div class="slider multisale-slider mb-35">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multisale  slider section title  =======-->

					<div class="section-title modern-section-title">
						<span class="section-pill">Spices</span>
					</div>

					<!--=======  End of multisale slider section title  =======-->
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<!--=======  multi sale slider wrapper  =======-->

					<div class="multisale-slider-wrapper">
						<!--=======  single multisale slider product  =======-->
                        {% for ad in ads_spices %}
						<div class="gf-product multisale-slider-product">
							<div class="image">
								<a href="{{ ad.get_absolute_url }}">
									<span class="{{ ad.get_label_display }}">{{ ad.get_status_display }}</span>
                                    {% if ad.delivery %}
                                        <span class="days">Del:{{ ad.delivery }}</span>
                                    {% endif %}
                                    {% for images in ad.get_second_image %}
                                        {% thumbnail images.product_image "260x194" crop="10px 10px"  as im %}
                                                <img  style="margin:{{ im|margin:"260x194" }}" src="{{ im.url }}" width="{{ im.x }}" height="{{ im.y }}" class="img-fluid "  />
                                        {% endthumbnail %}
                                    {% endfor %}
								</a>
								<div class="product-hover-icons" id = "part{{ ad.id }}">
									{% include 'home/special_section.html' %}
								</div>
							</div>
							<div class="product-content">
								<div class="product-categories">
									<a>{{ ad.category}}</a>
								</div>
								<h3 class="product-title"><a href="{{ ad.get_absolute_url }}">{{ ad.title }}</a></h3>
								<div class="price-box">
                                    {% if ad.discount_price %}
                                      <span class="discounted-price">₦{{ ad.discount_price|intcomma}}</span>
                                      <span class="main-price">₦{{ ad.discount_price|intcomma}}</span>
                                     {% else %}
                                      <span class="discounted-price">₦{{ ad.price|intcomma}}</span>
                                    {% endif %}
								</div>
							</div>

						</div>
                        {% endfor %}
					</div>

					<!--=======  End of multi sale slider wrapper  =======-->
				</div>
			</div>
            <br>
            <div class="row">
                <a href="{% url 'home:ads_list' %}" class="slider-btn" style="margin-left: 40%">SHOW ALL</a>
            </div>
		</div>
	</div>

     {% include 'home/affiliate.html' %}

    <br>

    </div>
{% endblock %}
