<!DOCTYPE html>
{% load i18n %}
{% load static %}
{% load django_bootstrap5 %}
{% load thumbnail %}
{% load humanize %}
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>{% block title %}Bunchfood{% endblock %}</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% block extra_head %}{% endblock %}
    <link rel="icon" href="{% static 'assets/images/favicon.png' %}">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            boxShadow: { soft: '0 10px 30px -18px rgba(2, 6, 23, 0.35)' }
          }
        }
      }
    </script>

    <link href="{% static 'assets/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/font-awesome.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/elegent.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/plugins.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/helper.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/main.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/custom.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'star-ratings/css/star-ratings.css' %}">

    <style>
        .alert-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 360px;
        }
        .alert-container .alert {
            margin: 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        body {
            background-color: #f8fafc;
        }
    </style>
</head>

<body class="bg-gray-50">

{#    <div id="output_box"></div>#}
    {% if messages %}
      <div class="alert-container" role="status" aria-live="polite">
          {% for message in messages %}
          <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          {% endfor %}
      </div>
    {% endif %}

    {% include 'navbar.html' %}

    <main class="page-shell">
      {% block content %}{% endblock %}
    </main>

    {% include 'footer.html' %}

    <a href="#" class="scroll-top"></a>

    <script src="{% static 'assets/js/vendor/jquery.min.js' %}"></script>
    <script src="{% static 'assets/js/popper.min.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins.js' %}"></script>
    <script src="{% static 'assets/js/main.js' %}"></script>
    <script src="{% static 'assets/js/voice_assistant.js' %}"></script>
    <script type="text/javascript" src="{% static 'star-ratings/js/dist/star-ratings.min.js' %}"></script>
    <script src="{% static 'hitcount/hitcount-jquery.js' %}"></script>

    <script type="text/javascript">
      $(document).ready(function(){
        setTimeout(function() { $('.alert').alert('close'); }, 3000);
      });
    </script>
    
    <script>
      $(document).on('click', '#delete', function(){ return confirm("Are you sure to delete this post?"); });

      $(document).on('click', '.reply-btn', function() {
        $(this).parent().parent().next('.replied-comments').fadeToggle();
      });

      $(document).on('submit', '.comment-form, .reply-form', function(event){
        event.preventDefault();
        var $form = $(this);
        $.ajax({
          type: 'POST',
          url: $form.attr('action'),
          data: $form.serialize(),
          dataType: 'json',
          success: function(response) {
            $('.main-comment-section').html(response['form']);
            $('textarea').val('');
          }
        });
      });

      $(document).on('click', '#wishlist', function(event){
        event.preventDefault();
        var pk = $(this).data('id');
        $.ajax({
          type: 'POST',
          url: '{% url 'home:favourite_ads'%}',
          data: {'id': pk, 'csrfmiddlewaretoken': '{{ csrf_token }}'},
          dataType: 'json',
          success: function(response){
            $('#part' + pk).html(response['form']);
          }
        });
      });

      $(document).on('click', '#cart', function(event){
        event.preventDefault();
        var pk = $(this).data('id');
        $.ajax({
          type: 'POST',
          url: '{% url 'cart:add_to_cart_ajax'%}',
          data: {'id': pk, 'csrfmiddlewaretoken': '{{ csrf_token }}'},
          dataType: 'json',
          success: function(response){
            if (response['ok']) {
              $('#part' + pk).html(response['ok']);
            }
          }
        });
      });
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>
