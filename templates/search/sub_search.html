{% load static %}
{% load django_bootstrap5 %}
{% load i18n %}
{% load thumbnail %}

<div class="col-lg-3 order-2 order-lg-1">
  <div class="modern-card p-4 mb-4 sticky-top" style="top: 96px;">
    <form method="GET" action="{% url 'product_search:product_filter' %}" id="search-filter-form" class="space-y-4">
      <input type="hidden" name="order" value="{{ request.GET.order.strip }}"/>
      <input type="hidden" name="view" value="{{ request.GET.view.strip }}"/>

      <div>
        <h3 class="text-base font-semibold mb-2">Filter By Category</h3>
        <div class="space-y-2 max-h-56 overflow-auto pr-1">
          {% for category in categories %}
            <label class="flex items-center gap-2 text-sm text-gray-700">
              <input type="checkbox" name="category" value="{{ category.name }}" {% if category.name in selected_categories %}checked{% endif %}>
              {{ category.name }}
            </label>
          {% endfor %}
        </div>
      </div>

      <div>
        <h3 class="text-base font-semibold mb-2">Filter By Price</h3>
        <div id="price-range"></div>
        <input type="text" id="price-amount" readonly>
        <input type="hidden" name="price_min" id="txtMin" value="{{ request.GET.price_min.strip }}"/>
        <input type="hidden" name="price_max" id="txtMax" value="{{ request.GET.price_max.strip }}"/>
      </div>

      <div>
        <h3 class="text-base font-semibold mb-2">Nearby Shops</h3>
        <label class="{% if nearby_only %}text-green-600 font-semibold{% endif %}">
          <input type="checkbox" name="nearby" {% if nearby_only %}checked{% endif %}> Show shops close to me
        </label>
      </div>

      <button class="w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl px-4 py-2 transition" type="submit">Apply filters</button>
    </form>
  </div>
</div>
